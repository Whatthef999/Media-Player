<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Media Player</title>

<style>
body {
    font-family: Arial, sans-serif;
    display: flex;
    margin: 0;
    height: 100vh;
    background: #0a0a0a;
    color: #eee;
}

/* ===== SIDEBAR ===== */
#sidebar {
    width: 220px;
    background: #111;
    padding: 20px;
    border-right: 1px solid #330000;
    overflow-y: auto;
}

.channel-btn {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    background: #222;
    border: 1px solid #330000;
    border-radius: 5px;
    color: #fff;
    cursor: pointer;
    text-align: left;
}
.channel-btn.active { background: #330000; }

/* ===== MAIN ===== */
#main {
    flex: 1;
    padding: 20px;
    display: flex;
    flex-direction: column;
}

/* ===== NOW PLAYING ===== */
#now-playing {
    display: flex;
    gap: 20px;
    background: #000;
    border: 1px solid #330000;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 15px;
}

#now-art {
    width: 320px;
    height: 320px;
    object-fit: cover;
    border-radius: 8px;
    box-shadow: 0 0 30px rgba(255,0,0,0.35);
}

#now-title {
    font-size: 1.5em;
    font-weight: bold;
    margin-bottom: 8px;
}

#now-channel { opacity: 0.7; }

/* ===== CUSTOM PLAYER ===== */
#player-controls {
    background: #111;
    border: 1px solid #330000;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 15px;
}

#control-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

.control-btn {
    padding: 8px 14px;
    font-size: 18px;
    border-radius: 6px;
    border: 1px solid #660000;
    cursor: pointer;
    background: linear-gradient(180deg, #ff1a1a, #990000);
    color: #fff;
}

.control-btn.off {
    background: linear-gradient(180deg, #333, #111);
    border-color: #333;
    color: #aaa;
}

#time {
    font-size: 12px;
    opacity: 0.8;
    min-width: 90px;
    text-align: center;
}

/* ===== TIMELINE ===== */
#timeline {
    flex: 1;
    height: 6px;
    background: #220000;
    border-radius: 4px;
    cursor: pointer;
    position: relative;
}

#progress {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #ff0000, #aa0000);
    border-radius: 4px;
}

/* ===== PLAYLIST ===== */
#playlist {
    flex: 1;
    overflow-y: auto;
}

.track {
    display: flex;
    gap: 10px;
    padding: 10px;
    background: #111;
    border-radius: 6px;
    cursor: pointer;
    border-left: 4px solid transparent;
    margin-bottom: 8px;
}

.track.active {
    background: #2a0000;
    border-left: 4px solid #ff0000;
}

.track img {
    width: 60px;
    height: 60px;
    border-radius: 4px;
    object-fit: cover;
}
</style>
</head>

<body>

<div id="sidebar"></div>

<div id="main">

    <div id="now-playing">
        <img id="now-art">
        <div>
            <div id="now-title"></div>
            <div id="now-channel"></div>
        </div>
    </div>

    <!-- CUSTOM AUDIO UI -->
    <div id="player-controls">
        <div id="control-row">
            <button class="control-btn" id="prevBtn">‚èÆ</button>
            <button class="control-btn" id="playPause">‚ñ∂</button>
            <button class="control-btn" id="nextBtn">‚è≠</button>

            <div id="time">0:00 / 0:00</div>

            <div id="timeline">
                <div id="progress"></div>
            </div>

            <button class="control-btn" id="shuffleBtn">üîÄ</button>
        </div>
    </div>

    <div id="playlist"></div>
</div>

<audio id="audio"></audio>

/* ================= CONFIG ================= */

const FALLBACK_THUMB = 'thumbs/Default.gif';

const channels = {
    Metal: {
        defaultThumb: 'thumbs/Default.gif',
        tracks: [
            { file: 'mp3/metal/EtherealHordes.mp3', title: 'Ethereal Hordes', thumb: 'thumbs/metal/EtherealHordes.jpg' },
            { file: 'mp3/metal/MarchoftheGolgothanCavalry.mp3', title: 'March of the Golgothan Cavalry', thumb: 'thumbs/metal/MarchoftheGolgothanCavalry.jpg' },
            { file: 'mp3/metal/Shadowseternal.mp3', title: 'Shadows eternal', thumb: 'thumbs/metal/Shadowseternal.jpg' },
            { file: 'mp3/metal/Inquisition-IncenseofRest.mp3', title: 'Inquisition - Incense of Rest', thumb: 'thumbs/metal/.jpg' }
        ]
    },
    Rock: {
        defaultThumb: 'thumbs/Default.gif',
        tracks: [
            { file: 'mp3/rock/ACDC-HighVoltage.mp3', title: 'AC DC- High Voltage', thumb: 'thumbs/rock/ACDC-HighVoltage.jpg' },
            { file: 'mp3/rock/ACDC-LiveWire.mp3', title: 'AC DC - Live Wire', thumb: 'thumbs/rock/ACDC-LiveWire.jpg' },
            { file: 'mp3/rock/ACDC-TNT.mp3', title: 'AC DC - T.N.T', thumb: 'thumbs/rock/ACDC-TNT.jpg' }
        ]
    }
};

let currentChannel = 'Metal';
let playlist = channels[currentChannel].tracks;
let currentIndex = 0;

let shuffleEnabled = true;
let shuffleQueue = [];
let shufflePos = 0;

const audio = document.getElementById('audio');
const playBtn = document.getElementById('playPause');
const progress = document.getElementById('progress');
const timeline = document.getElementById('timeline');
const timeLabel = document.getElementById('time');
const nowArt = document.getElementById('now-art');
const nowTitle = document.getElementById('now-title');
const nowChannel = document.getElementById('now-channel');
const shuffleBtn = document.getElementById('shuffleBtn');

/* ===== HELPERS ===== */
function formatTime(t) {
    const m = Math.floor(t / 60);
    const s = Math.floor(t % 60).toString().padStart(2, '0');
    return `${m}:${s}`;
}

function resolveThumb(track) {
    return track.thumb || channels[currentChannel].defaultThumb || FALLBACK_THUMB;
}

/* ===== SHUFFLE ===== */
function buildShuffleQueue(start = 0) {
    shuffleQueue = playlist.map((_, i) => i).sort(() => Math.random() - 0.5);
    const pos = shuffleQueue.indexOf(start);
    [shuffleQueue[0], shuffleQueue[pos]] = [shuffleQueue[pos], shuffleQueue[0]];
    shufflePos = 0;
}

/* ===== PLAYBACK ===== */
function playTrack(i) {
    currentIndex = i;
    const t = playlist[i];

    audio.src = t.file;
    audio.play();

    nowArt.src = resolveThumb(t);
    nowTitle.textContent = t.title;
    nowChannel.textContent = currentChannel;

    highlight();
}

function next() {
    if (shuffleEnabled) {
        shufflePos++;
        if (shufflePos >= shuffleQueue.length) {
            buildShuffleQueue(currentIndex);
            shufflePos = 1;
        }
        playTrack(shuffleQueue[shufflePos]);
    } else {
        playTrack((currentIndex + 1) % playlist.length);
    }
}

function prev() {
    if (shuffleEnabled) {
        shufflePos = (shufflePos - 1 + shuffleQueue.length) % shuffleQueue.length;
        playTrack(shuffleQueue[shufflePos]);
    } else {
        playTrack((currentIndex - 1 + playlist.length) % playlist.length);
    }
}

/* ===== EVENTS ===== */
playBtn.onclick = () => audio.paused ? audio.play() : audio.pause();
audio.onplay = () => playBtn.textContent = '‚è∏';
audio.onpause = () => playBtn.textContent = '‚ñ∂';

audio.ontimeupdate = () => {
    progress.style.width = ((audio.currentTime / audio.duration) * 100 || 0) + '%';
    timeLabel.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration || 0)}`;
};

timeline.onclick = e => {
    const r = timeline.getBoundingClientRect();
    audio.currentTime = ((e.clientX - r.left) / r.width) * audio.duration;
};

audio.onended = next;

document.getElementById('nextBtn').onclick = next;
document.getElementById('prevBtn').onclick = prev;

shuffleBtn.onclick = () => {
    shuffleEnabled = !shuffleEnabled;
    shuffleBtn.classList.toggle('off', !shuffleEnabled);
    if (shuffleEnabled) buildShuffleQueue(currentIndex);
};

/* ===== RENDER ===== */
function renderPlaylist() {
    const pl = document.getElementById('playlist');
    pl.innerHTML = '';
    playlist.forEach((t, i) => {
        const d = document.createElement('div');
        d.className = 'track';
        d.innerHTML = `<img src="${resolveThumb(t)}"><span>${t.title}</span>`;
        d.onclick = () => playTrack(i);
        pl.appendChild(d);
    });
}

function highlight() {
    document.querySelectorAll('.track').forEach((el, i) =>
        el.classList.toggle('active', i === currentIndex)
    );
}

function renderChannels() {
    const sb = document.getElementById('sidebar');
    sb.innerHTML = '';
    Object.keys(channels).forEach(ch => {
        const b = document.createElement('button');
        b.className = 'channel-btn';
        b.textContent = ch;
        if (ch === currentChannel) b.classList.add('active');
        b.onclick = () => {
            currentChannel = ch;
            playlist = channels[ch].tracks;
            buildShuffleQueue(0);
            renderChannels();
            renderPlaylist();
            playTrack(0);
        };
        sb.appendChild(b);
    });
}

/* ===== INIT ===== */
buildShuffleQueue(0);
renderChannels();
renderPlaylist();
playTrack(0);
</script>

</body>
</html>


